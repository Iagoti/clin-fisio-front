<div class="dashboard-layout min-h-screen bg-slate-50 dark:bg-slate-950">
  <!-- Menu lateral -->
  <aside class="sidebar bg-white dark:bg-slate-900 border-r border-slate-200 dark:border-slate-700">
    <div class="sidebar-header border-b border-slate-200 dark:border-slate-700">
      <div class="logo text-slate-800 dark:text-slate-100">
        <mat-icon class="!text-emerald-600 dark:!text-emerald-400">spa</mat-icon>
        <span>Clin Fisio</span>
      </div>
    </div>

    <nav class="sidebar-nav">
      <a routerLink="/dashboard" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }" class="nav-item text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800">
        <mat-icon>dashboard</mat-icon>
        <span>Início</span>
      </a>
      @if (isAdmin()) {
        <a routerLink="/dashboard/usuarios" routerLinkActive="active" class="nav-item text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800">
          <mat-icon>people</mat-icon>
          <span>Usuários</span>
        </a>
      }
    </nav>

    <div class="sidebar-footer border-t border-slate-200 dark:border-slate-700">
      <div class="user-info">
        <span class="user-name text-slate-800 dark:text-slate-100">{{ user()?.nmUsuario ?? 'Usuário' }}</span>
      </div>
      <button mat-icon-button type="button" (click)="logout()" matTooltip="Sair">
        <mat-icon>logout</mat-icon>
      </button>
    </div>
  </aside>

  <!-- Conteúdo principal -->
  <main class="main-content">
    <!-- Barra superior -->
    <header class="top-bar bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-700">
      <button
        mat-button
        [matMenuTriggerFor]="userMenu"
        class="user-menu-trigger text-slate-700 dark:text-slate-200"
        matTooltip="Menu do usuário"
      >
        <mat-icon class="!text-emerald-600 dark:!text-emerald-400">person</mat-icon>
        <span>Bem-vindo, {{ user()?.nmUsuario ?? 'Usuário' }}</span>
        <mat-icon class="dropdown-icon">expand_more</mat-icon>
      </button>
      <mat-menu #userMenu="matMenu" class="user-menu" xPosition="before" yPosition="below">
        <button mat-menu-item routerLink="/dashboard/perfil">
          <mat-icon>edit</mat-icon>
          <span>Editar perfil</span>
        </button>
        <button mat-menu-item (click)="logout()">
          <mat-icon>logout</mat-icon>
          <span>Sair do sistema</span>
        </button>
      </mat-menu>
    </header>
    <div class="main-body">
      <router-outlet />
    </div>
  </main>
</div>
